[backend] 2025/07/11 10:53:55 Loaded configuration from config.yml
[backend] 2025/07/11 10:53:55 Starting Power Grid Game Server on :4085
[backend] 2025/07/11 10:53:55 Environment: production
[backend] 2025/07/11 10:53:55 Loaded 2 maps: 
[backend] 2025/07/11 10:53:55   - germany (Germany): 39 cities, 2--6 players
[backend] 2025/07/11 10:53:55   - usa (United States): 36 cities, 2--6 players
[backend] 2025/07/11 10:53:55 [backend] Session cleanup started: interval=5m0s, maxInactivity=30m0s
[backend] 2025/07/11 10:53:55 Started session cleanup routine
[backend] 2025/07/11 10:53:55 Server listening on :4085
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: 39900059-2268-46eb-8205-c264fe42c50a)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Host-1752252837227568000","data":{"player_name":"Host"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Host-1752252837227568000 (PlayerID: cacbed7f-0323-42aa-a438-fc84b26b9b5d, PlayerName: Host)
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: 20a9365e-1b8e-499b-8649-873d46c29534)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Player1-1752252837227570000","data":{"player_name":"Player1"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Player1-1752252837227570000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Player1-1752252837227570000 (PlayerID: 763f5a78-4cee-447a-a804-2a7e6401285d, PlayerName: Player1)
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: e9c99be6-bac2-4619-b7d4-0b6dd06621d9)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Player2-1752252837227570000","data":{"player_name":"Player2"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Player2-1752252837227570000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Player2-1752252837227570000 (PlayerID: 9bf3d4a0-55d7-4725-bef2-00586fab2738, PlayerName: Player2)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CREATE_LOBBY","session_id":"test-Host-1752252837227568000","data":{"lobby_name":"Full Game Test","map_id":"usa","max_players":3}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CREATE_LOBBY with sessionID: test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] Player cacbed7f-0323-42aa-a438-fc84b26b9b5d (SessionID: test-Host-1752252837227568000) creating lobby
2025/07/11 10:53:57 Initialized new lobby: Full Game Test (ID: d7ccb7e8-29ab-414d-a727-6680a9ed23de) with host: Host
2025/07/11 10:53:57 Created new lobby: Full Game Test (ID: d7ccb7e8-29ab-414d-a727-6680a9ed23de) with map: usa and host: Host
[backend] 2025/07/11 10:53:57 Created lobby: Full Game Test (ID: d7ccb7e8-29ab-414d-a727-6680a9ed23de) with host: Host
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"JOIN_LOBBY","session_id":"test-Player1-1752252837227570000","data":{"lobby_id":"d7ccb7e8-29ab-414d-a727-6680a9ed23de"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type JOIN_LOBBY with sessionID: test-Player1-1752252837227570000
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"JOIN_LOBBY","session_id":"test-Player2-1752252837227570000","data":{"lobby_id":"d7ccb7e8-29ab-414d-a727-6680a9ed23de"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type JOIN_LOBBY with sessionID: test-Player2-1752252837227570000
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"SET_READY","session_id":"test-Host-1752252837227568000","data":{"ready":true}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type SET_READY with sessionID: test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"SET_READY","session_id":"test-Player1-1752252837227570000","data":{"ready":true}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type SET_READY with sessionID: test-Player1-1752252837227570000
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"SET_READY","session_id":"test-Player2-1752252837227570000","data":{"ready":true}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type SET_READY with sessionID: test-Player2-1752252837227570000
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"START_GAME","session_id":"test-Host-1752252837227568000"}
[backend] 2025/07/11 10:53:57 [backend] Processing message type START_GAME with sessionID: test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] Connection closed: websocket: close 1006 (abnormal closure): unexpected EOF
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Host-1752252837227568000 (PlayerID: cacbed7f-0323-42aa-a438-fc84b26b9b5d). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: f9d3036a-0c7e-44ab-8a10-0a14948e3d6f)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Host-1752252837227568000","data":{"player_name":"Host"}}
[backend] 2025/07/11 10:53:57 [backend] Updating connection for existing session test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] Restoring existing session: test-Host-1752252837227568000 (PlayerID: cacbed7f-0323-42aa-a438-fc84b26b9b5d, PlayerName: Host)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CREATE_LOBBY","session_id":"test-Host-1752252837227568000","data":{"lobby_name":"Second Test Lobby","map_id":"usa","max_players":3}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CREATE_LOBBY with sessionID: test-Host-1752252837227568000
[backend] 2025/07/11 10:53:57 [backend] Player cacbed7f-0323-42aa-a438-fc84b26b9b5d (SessionID: test-Host-1752252837227568000) creating lobby
2025/07/11 10:53:57 Initialized new lobby: Second Test Lobby (ID: 81060750-ed8d-4cf1-aec3-bf0139d6fb92) with host: Host
2025/07/11 10:53:57 Created new lobby: Second Test Lobby (ID: 81060750-ed8d-4cf1-aec3-bf0139d6fb92) with map: usa and host: Host
[backend] 2025/07/11 10:53:57 Created lobby: Second Test Lobby (ID: 81060750-ed8d-4cf1-aec3-bf0139d6fb92) with host: Host
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: a16c043d-46a9-4bd7-bc5c-af0bb4e46bb0)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Temp0-1752252837537936000","data":{"player_name":"Temp0"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Temp0-1752252837537936000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Temp0-1752252837537936000 (PlayerID: f6b1b343-1463-4f69-ac43-fea23f143790, PlayerName: Temp0)
[backend] 2025/07/11 10:53:57 [backend] Connection closed: websocket: close 1006 (abnormal closure): unexpected EOF
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Temp0-1752252837537936000 (PlayerID: f6b1b343-1463-4f69-ac43-fea23f143790). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: a6de175d-f10d-49a2-b756-124b331ddcc2)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Temp1-1752252837539043000","data":{"player_name":"Temp1"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Temp1-1752252837539043000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Temp1-1752252837539043000 (PlayerID: 106cee62-33a2-4989-b555-a9dd4e2a66a0, PlayerName: Temp1)
[backend] 2025/07/11 10:53:57 [backend] Connection closed: websocket: close 1006 (abnormal closure): unexpected EOF
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Temp1-1752252837539043000 (PlayerID: 106cee62-33a2-4989-b555-a9dd4e2a66a0). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: 49fd49b9-5655-4fa4-a06b-a8c228beaf79)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Temp2-1752252837539787000","data":{"player_name":"Temp2"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Temp2-1752252837539787000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Temp2-1752252837539787000 (PlayerID: c1725e02-6552-405f-ac0b-d79afcf95b9f, PlayerName: Temp2)
[backend] 2025/07/11 10:53:57 [backend] Connection closed: websocket: close 1006 (abnormal closure): unexpected EOF
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Temp2-1752252837539787000 (PlayerID: c1725e02-6552-405f-ac0b-d79afcf95b9f). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: 81175b04-fb88-4977-ad8e-2df059e54246)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Temp3-1752252837540450000","data":{"player_name":"Temp3"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Temp3-1752252837540450000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Temp3-1752252837540450000 (PlayerID: 3bde2db7-1b02-4f26-9a94-ae30c4254297, PlayerName: Temp3)
[backend] 2025/07/11 10:53:57 [backend] Connection closed: websocket: close 1006 (abnormal closure): unexpected EOF
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Temp3-1752252837540450000 (PlayerID: 3bde2db7-1b02-4f26-9a94-ae30c4254297). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] New WebSocket connection established (temp ID: f2f99fb8-32ec-4dd6-bbbf-1578ee1fbb6c)
[backend] 2025/07/11 10:53:57 [backend] Received message: {"type":"CONNECT","session_id":"test-Temp4-1752252837541029000","data":{"player_name":"Temp4"}}
[backend] 2025/07/11 10:53:57 [backend] Processing message type CONNECT with sessionID: test-Temp4-1752252837541029000
[backend] 2025/07/11 10:53:57 [backend] New player session created: test-Temp4-1752252837541029000 (PlayerID: dee818d6-6a5b-43d2-b5ba-f34ad2bc479b, PlayerName: Temp4)
[backend] 2025/07/11 10:53:57 [backend] Connection closed: websocket: close 1006 (abnormal closure): unexpected EOF
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Temp4-1752252837541029000 (PlayerID: dee818d6-6a5b-43d2-b5ba-f34ad2bc479b). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] Connection closed: read tcp [::1]:4085->[::1]:55504: read: connection reset by peer
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Player1-1752252837227570000 (PlayerID: 763f5a78-4cee-447a-a804-2a7e6401285d). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] Connection closed: read tcp [::1]:4085->[::1]:55506: read: connection reset by peer
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Host-1752252837227568000 (PlayerID: cacbed7f-0323-42aa-a438-fc84b26b9b5d). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 [backend] Connection closed: read tcp [::1]:4085->[::1]:55505: read: connection reset by peer
[backend] 2025/07/11 10:53:57 [backend] Connection closed for session test-Player2-1752252837227570000 (PlayerID: 9bf3d4a0-55d7-4725-bef2-00586fab2738). Session retained for reconnection.
[backend] 2025/07/11 10:53:57 Received shutdown signal: terminated
[backend] 2025/07/11 10:53:57 Shutting down server...
[backend] 2025/07/11 10:53:57 [backend] Session cleanup routine stopped
[backend] 2025/07/11 10:53:57 Server gracefully stopped
